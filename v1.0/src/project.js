require=function e(t,n,i){function s(o,r){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({BattleMaster:[function(e,t,n){"use strict";cc._RF.push(t,"90daeJJqBhKxZI0YKUNqyWa","BattleMaster"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("./core/MessagePipeline"),s=function(e){return e&&e.__esModule?e:{default:e}}(e("./GameMaster")),a=cc.Class({extends:cc.Component,properties:{playerName:cc.Label,enemyName:cc.Label,playerStats:cc.Label,enemyStats:cc.Label,playerSprite:cc.Sprite,enemySprite:cc.Sprite,firstIcon:cc.Node,secondIcon:cc.Node,playerDamage:cc.Label,enemyDamage:cc.Label},statics:{instance:null},onLoad:function(){a.instance=this,this.node.setScale(0),this.actionAttack=cc.sequence(cc.scaleTo(.25,1.2),cc.scaleTo(.25,1)),this.actionDamage=cc.blink(.25,2),this.actionDamageLabel=cc.sequence(cc.spawn(cc.scaleTo(0,1),cc.moveTo(0,0,0)),cc.moveTo(1,0,20),cc.scaleTo(0,0)),this.damageForEnemy=0,this.damageForPlayer=0,this.anim=this.node.getComponent(cc.Animation),this.anim.on("finished",this.animTurnEnd,this),this._playerUnit=null,this._enemyUnit=null,this._playerFirst=!1},battleStart:function(e){this.node.setScale(1);var t=s.default.instance.getPlayerUnit(),n=s.default.instance.getEnemyUnit();e?(this.firstIcon.x=200,this.secondIcon.x=-200):(this.firstIcon.x=-200,this.secondIcon.x=200),this.playerSprite.spriteFrame=t.sushiSprite.spriteFrame,this.enemySprite.spriteFrame=n.sushiSprite.spriteFrame,this.playerSprite.node.scaleY=1,this.enemySprite.node.scaleY=1,this.playerName.string=t.name,this.enemyName.string=n.name,this.playerStats.string="体:"+t.hp+"\n攻:"+t.attack,this.enemyStats.string="体:"+n.hp+"\n攻:"+n.attack,this.damageForEnemy=t.attack,this.damageForPlayer=n.attack,e?this.damageForEnemy=Math.floor(1.5*this.damageForEnemy):this.damageForPlayer=Math.floor(1.5*this.damageForPlayer),this.enemyDamage.string="-"+this.damageForEnemy,this.playerDamage.string="-"+this.damageForPlayer,this.enemyDamage.node.setScale(0),this.playerDamage.node.setScale(0),this._playerUnit=t,this._enemyUnit=n,this._playerFirst=e,this._enemyDie=!1,this._playerDie=!1,this.anim.play("BattleStart")},$damageToEnemy:function(){this._enemyUnit.hp=Math.max(0,this._enemyUnit.hp-this.damageForEnemy),this.enemyStats.string="体:"+this._enemyUnit.hp+"\n攻:"+this._enemyUnit.attack,this._enemyUnit.hp<=0&&(this._enemyDie=!0,this.enemySprite.node.scaleY=0)},$damageToPlayer:function(){this._playerUnit.hp=Math.max(0,this._playerUnit.hp-this.damageForPlayer),this.playerStats.string="体:"+this._playerUnit.hp+"\n攻:"+this._playerUnit.attack,this._playerUnit.hp<=0&&(this._playerDie=!0,this.playerSprite.node.scaleY=0)},animTurnEnd:function(e){"BattleStart"===e.detail.name&&this._playerFirst?this.anim.play("PlayerAttack"):"BattleStart"!==e.detail.name||this._playerFirst?"PlayerAttack"===e.detail.name&&!this._enemyDie&&this._playerFirst?this.anim.play("EnemyAttack"):"EnemyAttack"!==e.detail.name||this._playerDie||this._playerFirst?"BattleEnd"===e.detail.name?(this.node.setScale(0),i.messagePipeline.sendMessage("onBattleEnd",{enemyDie:this._enemyDie,playerDie:this._playerDie,playerFirst:this._playerFirst})):this.anim.play("BattleEnd"):this.anim.play("PlayerAttack"):this.anim.play("EnemyAttack")}});n.default=a,t.exports=n.default,cc._RF.pop()},{"./GameMaster":"GameMaster","./core/MessagePipeline":"MessagePipeline"}],DisplayStats:[function(e,t,n){"use strict";cc._RF.push(t,"1ce9fzAG6xGyYH0BRFc+0FA","DisplayStats"),cc.Class({extends:cc.Component,properties:{displayStats:!0},onLoad:function(){cc.director.setDisplayStats(this.displayStats)}}),cc._RF.pop()},{}],EnemyAI:[function(e,t,n){"use strict";cc._RF.push(t,"00038hCaJJLyJAXTgZ8FSZC","EnemyAI");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./SushiMaster"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){},enemyTurn:function(){i.default.instance.getEnemyUnits(),this._pickupUnit()},_pickupUnit:function(){return null},_moveToTile:function(){}}),cc._RF.pop()},{"./SushiMaster":"SushiMaster"}],FieldGrid:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"55f89l1zs5KvJmLkUXIiuWi","FieldGrid"),Object.defineProperty(n,"__esModule",{value:!0});var s=e("./core/MessagePipeline"),a=i(e("./GameMaster")),o=i(e("./SushiMaster")),r=i(e("./FrameMaster")),c=i(e("./BattleMaster")),u=i(e("./StatsDisplay")),l=cc.Class({extends:cc.Component,properties:{handNode:cc.Node,playerStats:u.default,enemyStats:u.default},statics:{instance:null},onLoad:function(){l.instance=this,this._tilesPosition={},this.node.children.forEach(function(e){this._tilesPosition[e.name]=e.position},this),this.playerStats.displayOff(),this.enemyStats.displayOff(),s.messagePipeline.on("onSushiMoveEnd",this._onSushiMoveEnd,this),s.messagePipeline.on("onBattleEnd",this._onBattleEnd,this)},setNodeOnGrid:function(e,t,n){var i="x"+t+"y"+n;e.position=this._tilesPosition[i]},getTilePosition:function(e,t){var n="x"+e+"y"+t;return this._tilesPosition[n]},tileSelect:function(e,t){var n=a.default.instance.getMode();if("playerTurn"===n){var i=o.default.instance.getUnit(e,t);if(!i)return;r.default.instance.clear(),r.default.instance.putFrame("SELECT",e,t),i.isEnemy?(a.default.instance.setMode("enemySelect"),this.playerStats.displayOff(),this.enemyStats.displayOn(i)):(a.default.instance.setMode("playerSelectMove"),a.default.instance.setPlayerUnit(i),this.playerStats.displayOn(i),this.enemyStats.displayOff()),r.default.instance.setMoveRange(e,t,i.moveType,i.isEnemy)}else if("enemySelect"===n){var s=o.default.instance.getUnit(e,t);s&&s.isEnemy?(r.default.instance.clear(),r.default.instance.putFrame("SELECT",e,t),a.default.instance.setMode("enemySelect"),this.playerStats.displayOff(),this.enemyStats.displayOn(s),r.default.instance.setMoveRange(e,t,s.moveType,s.isEnemy)):(a.default.instance.setMode("playerTurn"),this.enemyStats.displayOff(),r.default.instance.clear())}else if("playerSelectMove"===n){var c=a.default.instance.getPlayerUnit();if(c.x===e&&c.y===t||c.isEnemy)return a.default.instance.setPlayerUnit(null),a.default.instance.setMode("playerTurn"),this.playerStats.displayOff(),void r.default.instance.clear();if(!r.default.instance.isMoveRange(e,t))return;if(!r.default.instance.isMovable(e,t))return;var u=o.default.instance.getUnit(e,t);if(u){if(!u.isEnemy)return;this._isBattleStart=!0,a.default.instance.setEnemyUnit(u)}this.handNode.parent=c.node,this.handNode.position=cc.p(0,0),c.move(e,t),r.default.instance.clear()}},_onSushiMoveEnd:function(e){if(this.enemyStats.displayOff(),this.playerStats.displayOff(),this._isBattleStart){var t=e.getUserData();c.default.instance.battleStart(t)}else this._turnEnd()},_onBattleEnd:function(e){this._isBattleStart=!1;var t=e.getUserData();if(t.enemyDie||t.playerDie){if(t.enemyDie){var n=a.default.instance.getEnemyUnit();o.default.instance.lostUnit(n.x,n.y,!0),this._turnEnd()}else if(t.playerDie){var i=a.default.instance.getPlayerUnit();o.default.instance.lostUnit(i.x,i.y,!1),this._turnEnd()}}else t.playerFirst?a.default.instance.getPlayerUnit().moveBack():a.default.instance.getEnemyUnit().moveBack()},_turnEnd:function(){this._releaseHand(),a.default.instance.setMode("playerTurn")},_releaseHand:function(){this.handNode.parent=this.node.parent,this.handNode.position=cc.p(-1e3,-1e3)}});n.default=l,t.exports=n.default,cc._RF.pop()},{"./BattleMaster":"BattleMaster","./FrameMaster":"FrameMaster","./GameMaster":"GameMaster","./StatsDisplay":"StatsDisplay","./SushiMaster":"SushiMaster","./core/MessagePipeline":"MessagePipeline"}],FrameMaster:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"c7620mF31lCkoXMD+W7gWXA","FrameMaster"),Object.defineProperty(n,"__esModule",{value:!0});var s=i(e("./core/PrefabNodePool")),a=i(e("./FieldGrid")),o=i(e("./SushiMaster")),r={up:[0,-1],left:[-1,0],right:[1,0],down:[0,1],upleft:[-1,-1],upright:[1,-1],downleft:[-1,1],downright:[1,1]},c=cc.Class({extends:cc.Component,properties:{framePrefab:cc.Prefab},statics:{instance:null},onLoad:function(){c.instance=this,this.framePool=new s.default(this.framePrefab,20,10,"TileFrame"),this._moveRange=[],this._moveRangeTiles={}},clear:function(){for(;this.node.children.length>0;)this.framePool.put(this.node.children[0])},putFrame:function(e,t,n){var i=this.framePool.get({type:e});i.parent=this.node,a.default.instance.setNodeOnGrid(i,t,n);var s="x"+t+"y"+n;this._moveRange.push(s),this._moveRangeTiles[s]=i.getComponent("TileFrame")},setMoveRange:function(e,t,n,i){this._moveRange=[],this._moveRangeTiles={};for(var s=0;s<n.length;s++){var a=r[n[s]];if(a)for(var o=!1,c=1;c<5;c++){var u=this._getNewXY(e,t,a[0]*c,a[1]*c,i);if(null===u)break;var l=this._getMoveToType(u,i);o&&(l="MOVERANGENG"),this.putFrame(l,u[0],u[1]),o||"MOVERANGEENEMY"!==l||(o=!0)}else{var h=this._getNewXY(e,t,n[s][0],n[s][1],i);if(null===h)continue;var p=this._getMoveToType(h,i);this.putFrame(p,h[0],h[1])}}},_getNewXY:function(e,t,n,i,s){var a=e+n,o=0;return o=s?t-i:t+i,a<0||a>=5||o<0||o>=5?null:[a,o]},_getMoveToType:function(e,t){var n="MOVERANGE",i=o.default.instance.getUnit(e[0],e[1]);return i&&(n=t&&i.isEnemy||!t&&!i.isEnemy?"MOVERANGENG":"MOVERANGEENEMY"),n},isMoveRange:function(e,t){var n="x"+e+"y"+t;return this._moveRange.indexOf(n)>=0},isMovable:function(e,t){var n="x"+e+"y"+t,i=this._moveRangeTiles[n];return!!i&&"MOVERANGENG"!==i.type}});n.default=c,t.exports=n.default,cc._RF.pop()},{"./FieldGrid":"FieldGrid","./SushiMaster":"SushiMaster","./core/PrefabNodePool":"PrefabNodePool"}],GameMaster:[function(e,t,n){"use strict";cc._RF.push(t,"77708c8E3ZLi5179Kzc74ip","GameMaster"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./SushiMaster")),s=cc.Class({extends:cc.Component,properties:{},statics:{instance:null},onLoad:function(){s.instance=this,this._gamestart=!1,this._mode="",this._moveSelectUnit=null,this._battleEnemyUnit=null,this._playerTurn=!0},getMode:function(){return this._mode},setMode:function(e){this._mode=e},getPlayerUnit:function(){return this._moveSelectUnit},setPlayerUnit:function(e){this._moveSelectUnit=e},getEnemyUnit:function(){return this._battleEnemyUnit},setEnemyUnit:function(e){this._battleEnemyUnit=e},isPlayerTurn:function(){return this._playerTurn},nextTurn:function(){this._playerTurn=!this._playerTurn,this._playerTurn?this.setMode("playerTurn"):this.setMode("enemyTurn")},update:function(e){this._gamestart||(i.default.instance.init(),this._gamestart=!0,this._mode="playerTurn")}});n.default=s,t.exports=n.default,cc._RF.pop()},{"./SushiMaster":"SushiMaster"}],MessagePipeline:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"45b91KVxpJMsIZ5xB5qvBH5","MessagePipeline"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,cc.EventTarget),o(t,[{key:"sendMessage",value:function(e,t){this.emit(e,t)}}]),t}();n.messagePipeline=new r;cc._RF.pop()},{}],PrefabNodePool:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}cc._RF.push(t,"f7864OcN2RDwLa/pfGOg/QC","PrefabNodePool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,n);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in s)return s.value;var o=s.get;if(void 0!==o)return o.call(i)},c=function(e){function t(e,n,a,o){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o));return r._handler=o,r._prefab=e,r._capacity=n,r._increase=a,r._peak=0,r._toBePutBackToPool=[],r}return a(t,cc.NodePool),o(t,[{key:"init",value:function(){for(var e=0;e<this._capacity;e++){var n=this._createNode();r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"put",this).call(this,n)}}},{key:"_createNode",value:function(){var e=cc.instantiate(this._prefab);if(this._handler){var t=e.getComponent(this._handler);t&&t.setPool(this)}return e}},{key:"get",value:function(e){if(0===this.size()){for(var n=0;n<this._increase;n++){var i=this._createNode();r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"put",this).call(this,i)}this._capacity+=this._increase}var s=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this,e);return this._peak=Math.max(this.countInUse,this._peak),s}},{key:"put",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"put",this).call(this,e)}},{key:"update",value:function(){}},{key:"countInUse",get:function(){return this._capacity-this.size()}},{key:"countPeak",get:function(){return this._peak}}]),t}();n.default=c,t.exports=n.default,cc._RF.pop()},{}],StatsDisplay:[function(e,t,n){"use strict";cc._RF.push(t,"06260R22l1F/5e9i4nMMOda","StatsDisplay"),cc.Class({extends:cc.Component,properties:{statsLabel:cc.Label,unitSprite:cc.Sprite},onLoad:function(){},displayOn:function(e){this.node.scaleY=1,this.statsLabel.string=e.name+"\n体:"+e.hp+"\n攻:"+e.attack,this.unitSprite.spriteFrame=e.sushiSprite.spriteFrame},displayOff:function(){this.node.scaleY=0}}),cc._RF.pop()},{}],SushiMaster:[function(e,t,n){"use strict";cc._RF.push(t,"0c335wNviRD8YLJpyuwqSR2","SushiMaster"),Object.defineProperty(n,"__esModule",{value:!0});e("./core/MessagePipeline");var i={SHARI:{spriteIndex:0,name:"シャリ",moveType:"type0",hp:30,attack:8},TORO:{spriteIndex:1,name:"トロ",moveType:"type1",hp:40,attack:12},EGG:{spriteIndex:2,name:"玉子",moveType:"type2",hp:50,attack:10},SHRIMP:{spriteIndex:3,name:"海老",moveType:"type3",hp:35,attack:10},IKURA:{spriteIndex:4,name:"イクラ",moveType:"type4",hp:30,attack:12}},s=[{isEnemy:!1,unitType:"SHRIMP",x:1,y:4},{isEnemy:!1,unitType:"TORO",x:2,y:4},{isEnemy:!1,unitType:"EGG",x:3,y:4},{isEnemy:!1,unitType:"IKURA",x:4,y:4},{isEnemy:!1,unitType:"SHARI",x:1,y:3},{isEnemy:!1,unitType:"SHARI",x:2,y:3},{isEnemy:!1,unitType:"SHARI",x:3,y:3},{isEnemy:!0,unitType:"IKURA",x:0,y:0},{isEnemy:!0,unitType:"EGG",x:1,y:0},{isEnemy:!0,unitType:"TORO",x:2,y:0},{isEnemy:!0,unitType:"SHRIMP",x:3,y:0},{isEnemy:!0,unitType:"SHARI",x:1,y:1},{isEnemy:!0,unitType:"SHARI",x:2,y:1},{isEnemy:!0,unitType:"SHARI",x:3,y:1}],a=cc.Class({extends:cc.Component,properties:{sushiUnitPrefab:cc.Prefab},statics:{instance:null},onLoad:function(){a.instance=this,this._sushiUnits=[]},init:function(){this._sushiUnits=[];for(var e=0;e<s.length;e++){var t=cc.instantiate(this.sushiUnitPrefab);t.parent=this.node;var n=t.getComponent("Sushi");n.init(s[e]),this._sushiUnits.push(n)}},getUnit:function(e,t){for(var n=0;n<this._sushiUnits.length;n++)if(this._sushiUnits[n].x===e&&this._sushiUnits[n].y===t)return this._sushiUnits[n];return null},lostUnit:function(e,t,n){for(var i=0;i<this._sushiUnits.length;i++)if(this._sushiUnits[i].x===e&&this._sushiUnits[i].y===t&&this._sushiUnits[i].isEnemy===n)return this._sushiUnits[i].node.destroy(),void this._sushiUnits.splice(i,1)},update:function(e){},getUnitInfo:function(e){return i[e]},getEnemyUnits:function(){for(var e=[],t=0;t<this._sushiUnits.length;t++)this._sushiUnits[t].isEnemy&&e.push(this._sushiUnits[t]);return e}});n.default=a,t.exports=n.default,cc._RF.pop()},{"./core/MessagePipeline":"MessagePipeline"}],Sushi:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}cc._RF.push(t,"c8b96VRd6FDm5LsyllTzY43","Sushi");var s=e("./core/MessagePipeline"),a=i(e("./FieldGrid")),o=i(e("./GameMaster")),r=(i(e("./FrameMaster")),i(e("./SushiMaster"))),c={type0:[[0,-1]],type1:[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],type2:[[-1,-2],[1,-2],[-2,-1],[2,-1],[-2,1],[2,1],[-1,2],[1,2]],type3:["up","left","right","down"],type4:["upleft","upright","downleft","downright"]};cc.Class({extends:cc.Component,properties:{isEnemy:!1,sushiSprite:cc.Sprite,sunglass:cc.Node,sushiSprites:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){this.x=-1,this.y=-1,this.beforeX=-1,this.beforeY=-1},init:function(e){this.isEnemy=e.isEnemy,this.unitType=e.unitType,this.x=e.x,this.y=e.y,this.beforeX=e.x,this.beforeY=e.y;var t=r.default.instance.getUnitInfo(this.unitType);this.moveType=c[t.moveType],this.name=t.name,this.hp=t.hp,this.attack=t.attack,this.sunglass.active=this.isEnemy,this.sushiSprite.spriteFrame=this.sushiSprites[t.spriteIndex],this.isEnemy&&(this.node.scaleX=-1),a.default.instance.setNodeOnGrid(this.node,this.x,this.y)},move:function(e,t){var n=this;this.beforeX=this.x,this.beforeY=this.y,this.x=e,this.y=t,o.default.instance.setMode("UnitMoving");var i=cc.moveTo(.5,a.default.instance.getTilePosition(e,t)),r=cc.scaleTo(.25,1.5),c=cc.scaleTo(.25,1),u=cc.callFunc(function(){s.messagePipeline.sendMessage("onSushiMoveEnd",!n.isEnemy)},this),l=cc.spawn(i,cc.sequence(r,c));this.node.runAction(cc.sequence(l,u))},moveBack:function(){var e=this;this.x=this.beforeX,this.y=this.beforeY,o.default.instance.setMode("UnitMoving");var t=cc.moveTo(.5,a.default.instance.getTilePosition(this.x,this.y)),n=cc.scaleTo(.25,1.5),i=cc.scaleTo(.25,1),r=cc.callFunc(function(){o.default.instance.setPlayerUnit(null),o.default.instance.setEnemyUnit(null),s.messagePipeline.sendMessage("onSushiMoveEnd",!e.isEnemy)},this),c=cc.spawn(t,cc.sequence(n,i));this.node.runAction(cc.sequence(c,r))}}),cc._RF.pop()},{"./FieldGrid":"FieldGrid","./FrameMaster":"FrameMaster","./GameMaster":"GameMaster","./SushiMaster":"SushiMaster","./core/MessagePipeline":"MessagePipeline"}],TileFrame:[function(e,t,n){"use strict";cc._RF.push(t,"d32e5IkD/BJZ4einCZrHdxC","TileFrame");var i={WHITE:"#ffffff",SELECT:"#ffff00",MOVERANGE:"#00ff00",MOVERANGEENEMY:"#ff0000",MOVERANGENG:"#7f7f7f"};cc.Class({extends:cc.Component,properties:{},onLoad:function(){},reuse:function(e){this.type=e.type,this.node.color=cc.hexToColor(i[this.type])},setPool:function(e){this._pool=e},_backToPool:function(){this._pool&&this._pool.put(this.node)}}),cc._RF.pop()},{}],TouchInput:[function(e,t,n){"use strict";cc._RF.push(t,"ebbbaGZgelHMo+XOSruDJ7R","TouchInput"),cc.Class({extends:cc.Component,properties:{},_onTouchBegan:function(e){e.getLocation();this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this._touched=!0},_finishTouch:function(e){if(this._touched){this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this),this._touched=!1;e.getLocation()}},_onTouchEnded:function(e){this._finishTouch(e)},_onTouchCancel:function(e){this._finishTouch(e)},_onTouchMove:function(e){e.getLocation()},onLoad:function(){this._touched=!1,this._registerEvent()},onDestroy:function(){this._unregisterEvent()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)}}),cc._RF.pop()},{}],TouchTile:[function(e,t,n){"use strict";cc._RF.push(t,"ecc6btSAytAKpKfWGA+PR5q","TouchTile");e("./core/MessagePipeline");var i=function(e){return e&&e.__esModule?e:{default:e}}(e("./FieldGrid"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this.node.name.indexOf("y");this.x=Number(this.node.name.substring(1,e)),this.y=Number(this.node.name.slice(e+1)),this._registerEvent()},onDestroy:function(){this._unregisterEvent()},_registerEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_unregisterEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this)},_onTouchBegan:function(e){i.default.instance.tileSelect(this.x,this.y),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this)},_finishTouch:function(e){this._touched&&this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this)},_onTouchEnded:function(e){this._finishTouch(e)},_onTouchCancel:function(e){this._finishTouch(e)},_onTouchMove:function(e){}}),cc._RF.pop()},{"./FieldGrid":"FieldGrid","./core/MessagePipeline":"MessagePipeline"}]},{},["BattleMaster","EnemyAI","FieldGrid","FrameMaster","GameMaster","StatsDisplay","Sushi","SushiMaster","TileFrame","TouchInput","TouchTile","DisplayStats","MessagePipeline","PrefabNodePool"]);